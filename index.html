<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Out Of Page Ad</title>
  <style>
    body {
      width: 100vw !important;
      max-width: 100vw !important;
      height: 100vh !important;
      max-height: 100vh !important;
      display: block;
      position: relative;
    }

    #startAdOutside {
      display: inline-block;
      padding: 10px 20px;
      background-color: #fff;
      color: #000;
      font-size: 16px;
      border: 1px solid #ccc;
      cursor: pointer;
      position: relative;
      /* opcional */
      z-index: 100000;
      /* más alto que el div si es necesario */
    }

    #div-gpt-ad-1763151050915-0 {
      width: 100vw !important;
      max-width: 100vw !important;
      height: 100vh !important;
      max-height: 100vh !important;
      background: rgba(0, 0, 0, 0.8);
      position: fixed;
      top: 0;
      left: 0;
      z-index: 99999;
      display: block;
      border: red 1px;
      padding: 5px;
    }

    #div-gpt-ad-1763151050915-0>div {
      width: 100vw !important;
      max-width: 100vw !important;
      height: 100vh !important;
      max-height: 100vh !important;
      background: rgba(0, 0, 0, 0.8);
      position: fixed;
      top: 0;
      left: 0;
      z-index: 99999;
      display: none;
    }
  </style>
  <!-- GPT / Google Publisher Tag -->
  <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>
  <script>
    window.googletag = window.googletag || { cmd: [] };
    let slot;

    googletag.cmd.push(function () {
      // Crear slot OOP
      slot = googletag.defineOutOfPageSlot(
        "/21628222637/Banner_OpenWeb",
        "div-gpt-ad-1763151050915-0"
      );

      if (slot) {
        slot.addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
        googletag.display("div-gpt-ad-1763151050915-0");
        
        googletag.pubads().addEventListener('slotRenderEnded', function (event) {
          console.log("slotRenderEnded:", event);

          if (event.slot === slot) {
            console.log("El anuncio del slot OOP se ha renderizado.");
            const c = document.getElementById("div-gpt-ad-1763151050915-0");

            // Tamaño que tú quieras para el anuncio:
            c.style.width = "100vw";
            c.style.height = "100vh";
            c.style.position = "fixed";
            c.style.top = "0";
            c.style.left = "0";
            c.style.zIndex = "999999";
            c.style.background = "black"; // opcional

            const iframe = document
              .getElementById("div-gpt-ad-1763151050915-0")
              .querySelector("iframe");

            if (iframe) {
              iframe.style.width = "100vw";
              iframe.style.height = "100vh";

            }
          }
        });
      }
    });
  </script>
</head>

<body>
  <button id="startAdOutside">Ver anuncio</button>
  <div id="div-gpt-ad-1763151050915-0">
    
  </div>

  <!-- ESTE SCRIPT SIEMPRE VE EL BOTÓN PORQUE ESTÁ DESPUÉS -->
  <script>
    const startBtn = document.getElementById("startAdOutside");

    console.log("startBtn encontrado:", startBtn); // debe mostrar el botón

    startBtn.addEventListener("click", function () {
      console.log("Click → googletag.display");
      const adDiv = document.getElementById('div-gpt-ad-1763151050915-0');

      adDiv.style.setProperty('display', 'block', 'important');
      initVast();
    });
  </script>

</body>

</html>
